{% from './term-macros.njk' import termLabel, termDescription, termIcon %}
{% from './term-macros.njk' import termList as renderTermList %}

<div class="hero text-center"><h1><span class="h3">{{ termLabel(term.index, false) }}:</span><div><div class="position-relative d-inline-block mx-auto theme-text-strong enlarged-text">{{ termIcon(term) }}</div></div>{{ termLabel(term, false) }}</h1><div>{{ termDescription(term, createTerm, termList, false) }}</div></div>
<div class="item-relationships">{% if term.relationships.items %}{% for index in term.itemIndex %}{% set relatedItems = term.relationships.items[index.id] %}<div{% if index.theme %} class="theme-{{ index.theme }}"{% endif %}>{% if relatedItems %}<h2 id="{{ index.id }}">{{ index.label }} – {{ relatedItems | length }}</h2>{% endif %}{% set items = term.items[index.id]|selectkeys(relatedItems) %}{% include 'components/item/item-list.njk' %}</div>{% endfor %}{% endif %}</div>
<div class="term-relationships">{% if term.relationships.terms %}{% for relatedCategoryId, relatedTerms in term.relationships.terms %}{% set relatedTermIndex = createTerm(relatedCategoryId, '_index') %}<h2 id="{{ relatedCategoryId }}">{{ termLabel(relatedTermIndex) }} – {{ relatedTerms | length }}</h2>{{ renderTermList(termList(relatedTerms, relatedCategoryId), createTerm, termList) }}{% endfor %}{% endif %}</div>
<div class="related-terms">{% if term.meta.related %}<h2 id="related">Related – {{ term.meta.related | length }}</h2>{{ renderTermList(termList(term.meta.related, term.collectionId), createTerm, termList) }}{% endif %}</div>
