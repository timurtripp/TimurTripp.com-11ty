{% from './term-macros.njk' import termLabel, termDescription %}
{% from './term-macros.njk' import termList as renderTermList %}

<h1><span class="h3">{{ termLabel(term.index, false) }}:</span>{{ termLabel(term, false) }}</h1><div class="text-center">{{ termDescription(term, createTerm, termList, false) }}</div>
{% if term.relationships.items %}{% for indexItem in term.itemIndex %}{% set relatedItems = term.relationships.items[indexItem.id] %}{% if relatedItems %}<h2 id="{{ indexItem.id }}">{{ indexItem.label }} – {{ relatedItems | length }}</h2>{% endif %}{% for id in relatedItems %}{% set item = term.items[indexItem.id][id] %}{% include '../item/' + indexItem.templates.summary %}{% endfor %}{% endfor %}{% endif %}
{% if term.relationships.terms %}{% for relatedCategoryId, relatedTerms in term.relationships.terms %}{% set relatedTermIndex = createTerm(relatedCategoryId, '_index') %}<h2 id="{{ relatedCategoryId }}">{{ termLabel(relatedTermIndex) }} – {{ relatedTerms | length }}</h2>{{ renderTermList(termList(relatedTerms, relatedCategoryId), createTerm, termList) }}{% endfor %}{% endif %}
{% if term.meta.related %}<h2 id="related">Related – {{ term.meta.related | length }}</h2>{{ renderTermList(termList(term.meta.related, term.collectionId), createTerm, termList) }}{% endif %}
